require 'dotenv/load'
require 'vonage'

VONAGE_APPLICATION_ID = ENV['VONAGE_APPLICATION_ID']
VONAGE_APPLICATION_PRIVATE_KEY_PATH = ENV['VONAGE_APPLICATION_PRIVATE_KEY_PATH']
BRAND_NAME = ENV['BRAND_NAME']
TO_NUMBER = ENV['TO_NUMBER']

client = Vonage::Client.new(
  application_id: VONAGE_APPLICATION_ID,
  private_key: File.read(VONAGE_APPLICATION_PRIVATE_KEY_PATH)
)
# The `whatsapp_interactive` verification channel is deprecated
# This snippet should not be used
client.verify2.start_verification(
  brand: BRAND_NAME,
  workflow: [
    {channel: 'whatsapp_interactive', to: TO_NUMBER}
  ]
)
